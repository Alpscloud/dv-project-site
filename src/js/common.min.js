document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".input__file");Array.prototype.forEach.call(e,function(e){var s=e.parentNode,t=s.innerHTML;e.addEventListener("change",function(e){var i="",n=s.nextElementSibling;n.classList.contains("active")&&n.classList.remove("active"),(i=this.files&&this.files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?(n.innerHTML=i,n.classList.add("is-active")):s.innerHTML=t})})}),$(document).ready(function(){var e,s=$("body"),t=s.width(),i=$(".header__bottom").offset().top;$(window).on("scroll",function(){$(this).scrollTop()>i?($(".header__bottom").addClass("is-fixed"),$(".header").css("padding-bottom",$(".header__bottom").outerHeight()+"px")):($(".header__bottom").removeClass("is-fixed"),$(".header").css("padding-bottom","0px"))}),$(".menu-item-has-children").each(function(){var e=$(this).find("> a");$('<button class="btn-toggle js-toggle-submenu-btn" type="button"></button>').insertAfter(e)}),$(".js-toggle-submenu-btn").on("click",function(e){e.preventDefault(),$(this).next("ul").stop().slideToggle(200),$(this).toggleClass("is-toggled")}),$(".js-smooth-scroll-link").on("click",function(e){e.preventDefault();var s=$(this).attr("href"),t=$(s).offset().top;$("html, body").animate({scrollTop:t},"slow")}),$(".js-open-engineer-popup-btn").on("click",function(e){e.preventDefault(),$(".js-popup-engineer").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-open-privacy-popup-btn").on("click",function(e){e.preventDefault(),$(".js-popup").fadeOut(300),$(".js-popup-text").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-open-consultation-popup-btn").on("click",function(e){e.preventDefault(),$(".js-popup-consultation").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-open-mchs-consultation-popup-btn").on("click",function(e){e.preventDefault(),$(".js-popup-mchs").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-open-service-popup-btn").on("click",function(e){e.preventDefault(),$(".js-popup-service").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-close-popup-btn").on("click",function(e){e.preventDefault(),$(this).parents(".js-popup").fadeOut(300),$("html").removeClass("is-fixed")}),$(".popup__overflow").on("click",function(e){e.stopPropagation();var s=$(this).find(".popup__body");s.is(e.target)||0!==s.has(e.target).length||($("html").removeClass("is-fixed"),$(".js-popup").fadeOut(300))}),$(window).on("scroll",function(){clearTimeout(e),s.hasClass("disable-hover")||s.addClass("disable-hover"),e=setTimeout(function(){s.removeClass("disable-hover")},200)}),$(".js-open-mobile-menu-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$("html").toggleClass("is-fixed"),$(".js-nav").stop().slideToggle(150)});new Swiper(".js-portfolio-desktop-slider",{speed:500,spaceBetween:0,slidesPerView:1,pagination:{el:".js-portfolio-desktop-slider-pagination",clickable:!0},navigation:{nextEl:".js-portfolio-desktop-slider-btn-next",prevEl:".js-portfolio-desktop-slider-btn-prev"}}),new Swiper(".js-portfolio-mobile-slider",{slidesPerView:"auto",speed:500,spaceBetween:0,navigation:{nextEl:".js-portfolio-mobile-slider-btn-next",prevEl:".js-portfolio-mobile-slider-btn-prev",disabledClass:"is-disabled"}}),new Swiper(".js-another-projects-slider",{slidesPerView:1,loop:!0,spaceBetween:30,pagination:{el:".js-another-projects-slider-pagination",clickable:!0},breakpoints:{1049:{slidesPerView:3},700:{slidesPerView:2}}}),new Swiper(".js-licenses-slider",{slidesPerView:"auto",touchRatio:1,speed:500,spaceBetween:0,touchRatio:0,autoplay:{delay:4e3,disableOnInteraction:!1},navigation:{nextEl:".js-licenses-slider-btn-next",prevEl:".js-licenses-slider-btn-prev",disabledClass:"is-disabled"},breakpoints:{620:{slidesPerView:3,touchRatio:0,autoplay:{delay:4e3,disableOnInteraction:!1}}}}),new Swiper(".js-feedbacks-slider",{slidesPerView:1,speed:500,loop:!0,pagination:{el:".js-feedbacks-slider-pagination",clickable:!0},spaceBetween:0,navigation:{nextEl:".js-feedbacks-slider-btn-next",prevEl:".js-feedbacks-slider-btn-prev",disabledClass:"is-disabled"}});if($(".js-project-slider-main").length>0){var n=new Swiper(".js-project-slider-thumbnails",{spaceBetween:10,slidesPerView:3,loop:!0,freeMode:!1,loopedSlides:1,watchSlidesVisibility:!0,watchSlidesProgress:!0,touchRatio:0});new Swiper(".js-project-slider-main",{spaceBetween:0,loop:!0,loopedSlides:1,navigation:{nextEl:".js-project-slider-main-btn-next",prevEl:".js-project-slider-main-btn-prev"},thumbs:{swiper:n}})}if($(".js-projects-slider").length>0){new Swiper(".js-projects-slider",{slidesPerView:"auto",slidesPerGroup:1,speed:500,loop:!0,spaceBetween:15,pagination:{el:".js-projects-slider-pagination",clickable:!0},navigation:{nextEl:".js-projects-slider-btn-next",prevEl:".js-projects-slider-btn-prev",disabledClass:"is-disabled"},breakpoints:{992:{slidesPerView:3,slidesPerGroup:3},620:{slidesPerView:2,slidesPerGroup:2}}});$(".js-project-slide-slider").length>0&&$(".js-project-slide-slider").each(function(){var e=$(this).parents(".project-slide__slider").find(".js-project-slide-slider-pagination");new Swiper($(this),{slidesPerView:1,touchRatio:0,pagination:{el:e,clickable:!0}})})}if($(".js-services-slider").length>0){var o=!1;t>620?o||(o=!0,new Swiper(".js-services-slider",{slidesPerView:2,slidesPerGroup:1,speed:500,loop:!0,touchRatio:0,spaceBetween:16,pagination:{el:".js-services-slider-pagination",clickable:!0},navigation:{nextEl:".js-services-slider-btn-next",prevEl:".js-services-slider-btn-prev",disabledClass:"is-disabled"},breakpoints:{1100:{slidesPerView:4,slidesPerGroup:1,touchRatio:1},900:{slidesPerView:3,touchRatio:1,slidesPerGroup:1,spaceBetween:32}}})):o=!1}if($(".js-thank-you-letters-slider").length>0)new Swiper(".js-thank-you-letters-slider",{slidesPerView:"auto",speed:500,loop:!0,pagination:{el:".js-thank-you-letters-slider-pagination",clickable:!0},spaceBetween:0,navigation:{nextEl:".js-thank-you-letters-slider-btn-next",prevEl:".js-thank-you-letters-slider-btn-prev",disabledClass:"is-disabled"},breakpoints:{992:{slidesPerView:1}}});$(".js-toggle-services-list-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-toggled"),$(".js-services-list .services-list__item").stop().slideToggle(200)}),$("[data-fancybox]").fancybox({toolbar:!1,smallBtn:!0}),$(".js-toggle-feedback-text-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-toggled"),$(this).parents(".feedback").find(".feedback__text span").stop().slideToggle(150)}),$(".js-toggle-faq").on("click",function(e){e.preventDefault(),$(this).parents(".faq__item").toggleClass("is-toggled"),$(this).parents(".faq__item").find(".faq__item--body").stop().slideToggle(170)}),$(".js-input").on("focus",function(){$(this).hasClass("is-error")&&$(this).removeClass("is-error")});var l=!1;$(".js-form").on("submit",function(e){e.preventDefault();var s=$(this);s.find(".form-send-error-text").hide();var t=s.find(".js-input"),i=!0,n=new FormData(s.get(0));$(t).each(function(){$(this).val()&&""!=$(this).val()||($(this).addClass("is-error"),i=!1)});var o=s.find(".form-send-error-text");0==o.length&&(s.find('.btn[type="submit"]').after('<div class="form-send-error-text" style="display:none;"></div>'),o=s.find(".form-send-error-text"));try{for(var r,a=n.getAll("fileFF[]"),d=[],p=0,c=0;r=a[c];c++){var f=r.name;f.split(".")[f.split(".").length-1].toLowerCase();p+=r.size}if(d.length,!1)return i=!1,s.find('.input__file[name="fileFF[]"]').val(""),s.find(".input__file--name").html(""),(o=s.find(".form-send-error-text")).html("Извините, письмо не отправлено. <br>Невозможно загрузить некоторые файлы: "+d.join("<br>")),o.show(),!1;if(p>1e7)return i=!1,s.find('.input__file[name="fileFF[]"]').val(""),s.find(".input__file--name").html(""),(o=s.find(".form-send-error-text")).html('Письмо не может быть отправлено, так как файл весит больше 10мб, вышлете его на почту <a href="mailto:aps@dv-p.ru">aps@dv-p.ru</a>'),o.show(),!1}catch(e){}if(!i)return!1;if(l)return!1;var u=s.find('.btn[type="submit"] .btn__text'),h=u.html();u.html("Идет отправка формы"),l=!0,$.ajax({contentType:!1,processData:!1,type:"POST",url:"/wp-content/themes/dv-project-theme/contacts.php",data:n,success:function(e){u.html(h),l=!1,o=s.find(".form-send-error-text"),"OK"==e?(s.trigger("reset"),s.find(".input__file--name").removeClass("is-active"),o.hide(),window.location.href="/typage"):(o.html(e),o.show())},error:function(e){u.html(h),l=!1,(o=s.find(".form-send-error-text")).html("Ошибка отправки формы"),o.show()}})}),$(".js-input-phone").mask("+7(999)-999-99-99",{placeholder:" "})});